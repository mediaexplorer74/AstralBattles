<UserControl x:Class="AstralBattles.Controls.PlayerFaceControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:Controls="clr-namespace:AstralBattles.Controls" mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="White" x:Name="mainControl"
    d:DesignHeight="150" d:DesignWidth="150"
             Loaded="UserControlLoaded"
    >

    <Border DataConLabel="{Binding ElementName=mainControl}" d:DataConLabel="{d:DesignInstance Type=Controls:PlayerFaceControl, IsDesignTimeCreatable=True}" x:Name="border1" BorderThickness="1" BorderBrush="Black" RenderTransformOrigin="0.5,0.5">
    	<Border.RenderTransform>
    		<CompositeTransform/>
    	</Border.RenderTransform>
		<VisualStateManager.VisualStateGroups>
			<VisualStateGroup x:Name="VisualStateGroup">
				<VisualStateGroup.Transitions>
					<VisualTransition GeneratedDuration="0:0:1" To="GotDamageState">
						<Storyboard x:Name="gotDamageStoryboard">
							<ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="textBlock">
								<EasingColorKeyFrame KeyTime="0" Value="#FFFF2300"/>
								<EasingColorKeyFrame KeyTime="0:0:0.434" Value="#FFFF2300"/>
								<EasingColorKeyFrame KeyTime="0:0:0.6" Value="#FFFF2300"/>
								<EasingColorKeyFrame KeyTime="0:0:1.105" Value="#FFFF2300"/>
								<EasingColorKeyFrame KeyTime="0:0:1.3" Value="Black"/>
							</ColorAnimationUsingKeyFrames>
							<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="textBlock">
								<EasingDoubleKeyFrame KeyTime="0" Value="0"/>
								<EasingDoubleKeyFrame KeyTime="0:0:0.434" Value="-35.0004"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.105" Value="-70.0009"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="-105"/>
							</DoubleAnimationUsingKeyFrames>
							<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="textBlock">
								<EasingDoubleKeyFrame KeyTime="0" Value="0"/>
								<EasingDoubleKeyFrame KeyTime="0:0:0.434" Value="1"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.105" Value="1"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
							</DoubleAnimationUsingKeyFrames>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.CornerRadius)" Storyboard.TargetName="border">
								<DiscreteObjectKeyFrame KeyTime="0:0:1.3">
									<DiscreteObjectKeyFrame.Value>
										<CornerRadius>20,0,0,0</CornerRadius>
									</DiscreteObjectKeyFrame.Value>
								</DiscreteObjectKeyFrame>
							</ObjectAnimationUsingKeyFrames>
							<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="border1">
								<EasingDoubleKeyFrame KeyTime="0" Value="1"/>
								<EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.85">
									<EasingDoubleKeyFrame.EasingFunction>
										<ElasticEase EasingMode="EaseOut"/>
									</EasingDoubleKeyFrame.EasingFunction>
								</EasingDoubleKeyFrame>
								<EasingDoubleKeyFrame KeyTime="0:0:1.2" Value="1"/>
							</DoubleAnimationUsingKeyFrames>
						</Storyboard>
					</VisualTransition>
					<VisualTransition GeneratedDuration="0:0:1" To="GotHealthState">
						<Storyboard x:Name="gotHealthStoryboard">
							<ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="textBlock">
								<EasingColorKeyFrame KeyTime="0" Value="#FF31F331"/>
								<EasingColorKeyFrame KeyTime="0:0:0.434" Value="#FE30F230"/>
								<EasingColorKeyFrame KeyTime="0:0:0.6" Value="#FD92FF6C"/>
								<EasingColorKeyFrame KeyTime="0:0:1.105" Value="#FE30F230"/>
								<EasingColorKeyFrame KeyTime="0:0:1.3" Value="#FF31F331"/>
							</ColorAnimationUsingKeyFrames>
							<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="textBlock">
								<EasingDoubleKeyFrame KeyTime="0" Value="0"/>
								<EasingDoubleKeyFrame KeyTime="0:0:0.434" Value="-35.0004"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.105" Value="-70.0009"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="-105"/>
							</DoubleAnimationUsingKeyFrames>
							<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="textBlock">
								<EasingDoubleKeyFrame KeyTime="0" Value="0"/>
								<EasingDoubleKeyFrame KeyTime="0:0:0.434" Value="1"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.105" Value="1"/>
								<EasingDoubleKeyFrame KeyTime="0:0:1.3" Value="0"/>
							</DoubleAnimationUsingKeyFrames>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.CornerRadius)" Storyboard.TargetName="border">
								<DiscreteObjectKeyFrame KeyTime="0:0:1.3">
									<DiscreteObjectKeyFrame.Value>
										<CornerRadius>20,0,0,0</CornerRadius>
									</DiscreteObjectKeyFrame.Value>
								</DiscreteObjectKeyFrame>
							</ObjectAnimationUsingKeyFrames>
						</Storyboard>
                    </VisualTransition>
                    <VisualTransition GeneratedDuration="0:0:0.5" To="SkipTurnState">
                        <VisualTransition.GeneratedEasingFunction>
                            <BackEase EasingMode="EaseOut"/>
                        </VisualTransition.GeneratedEasingFunction>
                        <Storyboard x:Name="skipTurnStateStoryboard">
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="clocksBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFCECECE"/>
                                <EasingColorKeyFrame KeyTime="0:0:1.777" Value="#FF787878"/>
                                <EasingColorKeyFrame KeyTime="0:0:2.046" Value="#FFCECECE"/>
                            </ColorAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="clocksBorder">
                                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                <EasingDoubleKeyFrame KeyTime="0:0:1.183" Value="0.785">
                                    <EasingDoubleKeyFrame.EasingFunction>
                                        <CircleEase EasingMode="EaseOut"/>
                                    </EasingDoubleKeyFrame.EasingFunction>
                                </EasingDoubleKeyFrame>
                                <EasingDoubleKeyFrame KeyTime="0:0:2.046" Value="0"/>
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.974" To="180" Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationZ)" Storyboard.TargetName="image1" d:IsOptimized="True"/>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="clocksBorder">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Visible</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                                <DiscreteObjectKeyFrame KeyTime="0:0:1.183">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Visible</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                                <DiscreteObjectKeyFrame KeyTime="0:0:2.1">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Collapsed</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
				<VisualState x:Name="Default"/>
				<VisualState x:Name="GotDamageState"/>
                <VisualState x:Name="GotHealthState"/>
                <VisualState x:Name="SkipTurnState"/>
            </VisualStateGroup>
		</VisualStateManager.VisualStateGroups>
    
		<Grid x:Name="LayoutRoot">
			<Image Source="{Binding ImageUri}" />
			<Border Background="Black" Opacity="0.395" Height="30" VerticalAlignment="Top">
				<TextBlock Label="{Binding Player.Name}" FontWeight="Bold" FontSize="20" VerticalAlignment="Center" Margin="5,-3,0,0"/>
			</Border>
			<Border x:Name="border" Background="Black" Width="50" Height="50" HorizontalAlignment="Right" VerticalAlignment="Bottom" Opacity="0.695">
				<TextBlock x:Name="textBlock1" Label="{Binding Player.Health}" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="32" Margin="0,-4,0,0" FontWeight="Bold" />
			</Border>
			<TextBlock x:Name="textBlock" Opacity="0" Label="{Binding OverflowText}" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="64" Foreground="White" RenderTransformOrigin="0.5,0.5" >
				<TextBlock.RenderTransform>
					<CompositeTransform/>
				</TextBlock.RenderTransform>
            
			</TextBlock>

            <Border x:Name="clocksBorder" Background="Transparent" Visibility="Collapsed">
                <Image x:Name="image1" Source="/AstralBattles;component/Resources/Icons/skipturn.png" Width="70" >
                    <Image.Projection>
                        <PlaneProjection/>
                    </Image.Projection>
                </Image>
            </Border>
            
        </Grid>
	</Border>
</UserControl>
