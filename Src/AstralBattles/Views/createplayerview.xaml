<Page 
    x:Class="AstralBattles.Views.CreatePlayerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="using:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:Converters="using:AstralBattles.Converters" xmlns:ViewModels="using:AstralBattles.ViewModels"
    xmlns:Controls="using:AstralBattles.Controls" FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="White" 
    mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="480"
    >

    <Page.DataContext>
        <ViewModels:CreatePlayerViewModel/>
    </Page.DataContext>
    
    <Page.Resources>

        <Converters:FaceImageConverter x:Key="faceImageConverter"/>
        <Converters:SpecialElementConverter x:Key="specialElementConverter" />
        <Converters:ElementsImageConverter x:Key="elementsImageConverter" />

        <DataTemplate x:Key="SpecialElementItemDataTemplate">
            <Grid Background="Transparent">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="1" Text="{Binding ., Converter={StaticResource specialElementConverter}}" 
                           FontSize="27" Margin="10,0,0,0" VerticalAlignment="Center"/>
                <Image Margin="0" Height="35" Source="{Binding ., Converter={StaticResource elementsImageConverter}}" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="SpecialElementFullItemDataTemplate">
            <Grid Background="#1D1D1D" Width="420">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="90" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="1" Text="{Binding ., Converter={StaticResource specialElementConverter}}" 
                           FontSize="48" Margin="15"/>
                <Image Margin="10" Source="{Binding ., Converter={StaticResource elementsImageConverter}}" />

            </Grid>
        </DataTemplate>
        
    </Page.Resources>
    <Controls:BusyIndicatorControl 
                    IsBusy="{Binding IsBusy}" 
                    Foreground="White"
                    BusyText="{Binding CommonResources.Loading, Source={StaticResource ResourceWrapper}}"
                    Style="{StaticResource BusyIndicatorStyle}"
                    >
        
        <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="30,0,30,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition />
            </Grid.RowDefinitions>




                <Button Margin="0,30,0,0" Width="250" 
                    Height="250" VerticalAlignment="Top" BorderThickness="0"
                    Command="{Binding ChangeFace}">
                    <Image Margin="-10" Source="{Binding Face, Converter={StaticResource faceImageConverter}}"/>
                </Button>
            <TextBlock Grid.Row="1" Margin="0,-10,0,30" Text="{Binding CommonResources.TapToChange, Source={StaticResource ResourceWrapper}}" HorizontalAlignment="Center" Foreground="Gray"/>

            <TextBlock Grid.Row="2" Foreground="Gray" Margin="10,0,0,0" Text="{Binding CommonResources.Name, Source={StaticResource ResourceWrapper}}"/>
            <TextBox Grid.Row="3" 
                     Margin="0,-4,0,0"
                     FontSize="28" 
                     Text="{Binding Name, Mode=TwoWay}" 
                     Height="76"/>

            <TextBlock Grid.Row="4" Foreground="Gray" Margin="10,0,0,0" Text="{Binding CommonResources.FifthElement, Source={StaticResource ResourceWrapper}}"/>
            <ComboBox Margin="11,0,12,0" VerticalAlignment="Top" Grid.Row="5" Height="76"
                      ItemsSource="{Binding SpecialElements}"
                      SelectedItem="{Binding PlayerSpecialElement, Mode=TwoWay}"
                      ItemTemplate="{StaticResource SpecialElementItemDataTemplate}" />

            <Button BorderThickness="0" Background="#93A99D50" Margin="0,18" Grid.Row="6" 
                    Command="{Binding Ok}" VerticalAlignment="Bottom" Grid.RowSpan="3" Foreground="White"
                    Height="76" Width="200" 
                    Content="{Binding CommonResources.Ok, Source={StaticResource ResourceWrapper}}">
            </Button>
            
            <Button x:Name="editDeckControl" BorderThickness="0" Background="#93A99D50" Margin="0,18" Grid.Row="6" 
                    Command="{Binding EditDeck}" VerticalAlignment="Top" Foreground="White"
                    Height="76" Width="420" 
                    Content="{Binding CommonResources.ConfigureDeck, Source={StaticResource ResourceWrapper}}">
            </Button>
            
        </Grid>
        </Grid>
    </Controls:BusyIndicatorControl>

</Page>
