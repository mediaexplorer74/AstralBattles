<Page 
    x:Class="AstralBattles.Views.TwoPlayersOptions"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ViewModels="clr-namespace:AstralBattles.ViewModels"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:Converters="clr-namespace:AstralBattles.Converters" xmlns:Controls="clr-namespace:AstralBattles.Controls"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="White" Background="Black"
    mc:Ignorable="d" 
    d:DesignHeight="800" d:DesignWidth="480"
    >
    <Page.DataContext>
        <ViewModels:TwoPlayersOptionsViewModel/>
    </Page.DataContext>

    <Page.Resources>
        <Converters:SpecializationConverter x:Key="specializationConverter"/>
		<Converters:SpecializationTipConverter x:Key="specializationTipConverter"/>
        <Converters:FaceImageConverter x:Key="faceImageConverter"/>
        <Converters:SpecialElementConverter x:Key="specialElementConverter" />
        <Converters:ElementsImageConverter x:Key="elementsImageConverter" />
    </Page.Resources>

    <Controls:BusyIndicatorControl 
        IsBusy="{Binding IsBusy}" 
        Foreground="White"
        BusyLabel="{Binding CommonResources.Loading, Source={StaticResource ResourceWrapper}}"
        Style="{StaticResource BusyIndicatorStyle}"
        HideApplicationBar="True">
        <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Label="{Binding CommonResources.TwoPlayers, Source={StaticResource ResourceWrapper}}" FontSize="80" Margin="0,-10,0,20"/>
        
        <StackPanel Grid.Row="1"  Margin="0,0,0,0" d:LayoutOverrides="Width" VerticalAlignment="Center">
            
            <HyperlinkButton Command="{Binding Continue}" 
                             Opacity="{Binding CanContinue, Converter={StaticResource trueToOpacityConverter}}" 
                             Content="{Binding Resources.CommonResources.Continue}" 
                             Style="{StaticResource HyperlinkButtonStyle}"/>
            <TextBlock Foreground="Gray" 
                       Margin="15,-5,0,0" 
                       Opacity="{Binding CanContinue, Converter={StaticResource trueToOpacityConverter}}" 
                       Label="{Binding Resources.CommonResources.ContinueTip}"/>

            <HyperlinkButton Command="{Binding NewGame}" 
                             Content="{Binding Resources.CommonResources.NewGame}" 
                             Margin="0,3,0,0" 
                             Style="{StaticResource HyperlinkButtonStyle}"/>
            <TextBlock Foreground="Gray" 
                       Margin="15,-5,0,20" 
                       Label="{Binding Resources.CommonResources.NewGameTip}"/>
        </StackPanel>
        
        <!--<Rectangle Grid.RowSpan="4" Height="560" Fill="#FF1B1B1B" VerticalAlignment="Bottom"/>-->


            <StackPanel Grid.Row="2" Margin="20,30,0,0" Orientation="Horizontal" Background="Black">
                <Image Source="{Binding FirstPlayerPhoto, Converter={StaticResource faceImageConverter}}" 
                       Width="110" Height="110">
                </Image>
                <StackPanel>
                    <TextBlock Margin="10,-15,0,0" FontSize="44" Label="{Binding FirstPlayer}">
                    </TextBlock>
                    <TextBlock Margin="10,-6,0,0" Foreground="Gray" FontSize="20" Label="{Binding CommonResources.TapToChange, Source={StaticResource ResourceWrapper}}"/>


                    <Image Margin="12,10,0,0" Width="35" Height="35" 
                           HorizontalAlignment="Left"
                           Source="{Binding FirstPlayerSpecialElement, Converter={StaticResource elementsImageConverter}}" />

                </StackPanel>
                <interactivity:Interaction.Behaviors>
                    <core:EventTriggerBehavior EventName="Tapped">
                        <core:InvokeCommandAction Command="{Binding ChangeFirstPlayer}" />
                    </core:EventTriggerBehavior>
                </interactivity:Interaction.Behaviors>
            </StackPanel>

                <TextBlock Grid.Row="3" Label="VS" HorizontalAlignment="Left" 
                           FontSize="30" Foreground="#FF7A6D49" Margin="60,15,0,15"/>


            <StackPanel Grid.Row="4" Margin="20,0,0,0" Orientation="Horizontal">
                <Image Source="{Binding SecondPlayerPhoto, Converter={StaticResource faceImageConverter}}" 
                       Width="110" Height="110">
                    <interactivity:Interaction.Behaviors>
                        <core:EventTriggerBehavior EventName="Tapped">
                            <core:InvokeCommandAction Command="{Binding ChangeSecondPlayer}" />
                        </core:EventTriggerBehavior>
                    </interactivity:Interaction.Behaviors>
                </Image>
                <StackPanel>
                    <TextBlock Margin="10,-15,0,0" FontSize="44" Label="{Binding SecondPlayer}">
                        <interactivity:Interaction.Behaviors>
                            <core:EventTriggerBehavior EventName="Tapped">
                                <core:InvokeCommandAction Command="{Binding ChangeSecondPlayer}" />
                            </core:EventTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </TextBlock>
                    <TextBlock Margin="10,-6,0,0" Foreground="Gray" FontSize="20" Label="{Binding CommonResources.TapToChange, Source={StaticResource ResourceWrapper}}"/>


                    <Image Margin="12,10,0,0" Width="35" Height="35" 
                           HorizontalAlignment="Left"
                           Source="{Binding SecondPlayerSpecialElement, Converter={StaticResource elementsImageConverter}}" />

                    <CheckBox IsChecked="{Binding IsSecondPlayerComputer, Mode=TwoWay}" Content="{Binding Resources.CommonResources.IsComputer}" 
                            Width="272" HorizontalAlignment="Left" Margin="70,-56,0,-20"/>


                </StackPanel>
            </StackPanel>



        </Grid>
        </Controls:BusyIndicatorControl>
</Page>
